# Dockerfile for unit tests only
FROM python:3.9-slim

WORKDIR /app

# Copy requirements first for caching
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy only unit tests - be very specific to avoid integration tests
COPY tests/unit/ ./tests/unit/

# Create test results directory
RUN mkdir -p /app/test-results

# Verify only unit tests are present
RUN ls -la tests/ && echo "=== Unit tests only ===" && ls -la tests/unit/

# Set the default command to run only unit tests
CMD ["pytest", "tests/unit/", "-v"]